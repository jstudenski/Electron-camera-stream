<head>
  <link href="style/style.css" rel="stylesheet">
</head>
<body>
  
  <div id="refresh" onclick="sendSignal('refresh:btn')">Refresh<!-- <img src="images/refresh.png"> --></div>
  <div id="devTools" onclick="sendSignal('devTools:btn')">Inspector<!-- <img src="images/wrench.png"> --></div>
  <div id="addTask" onclick="sendSignal('addTask:btn')">Add Task<!-- <img src="images/plus.png"> --></div>
  <div id="clear" onclick="clearTodos()">Clear List<!-- <img src="images/eraser.png"> --></div>
  <div id="showfiles" onclick="sendSignal('showfiles:btn')">Show Files<!-- <p>files</p> --></div>
  <div id="capture" onclick="sendSignal('capture:btn')">Take Pic<!-- <p>cam</p> --></div>
  <div id="transfer" onclick="sendSignal('transfer:btn')">Transfer Pic<!-- <p>cam</p> --></div>
  <div id="test" onclick="sendSignal('test:btn')">TEST!</div>
  <div id="download" onclick="sendSignal('download:btn')">download</div>
  <div id="upload" onclick="sendSignal('upload:btn')">upload</div>


  <div id="sendText" onclick="sendSignal('sendText:btn')">Send Jeff gif</div>

<br>
  <h2></h2>
  <ul>
  </ul>

<div id="myimg">
  <img src="test.jpg">
</div>

<!-- 
  <form class="center">
    <label>Enter Phone</label><br>
    <input class="phone_us" autofocus />
    <button id="submit" type="submit">Submit</button>
  </form> -->

  <!-- <input type="text" name="field-name" data-mask="00/00/0000" /> -->

  <!-- <input class="your-field"> -->

  <form class="center">
  <label>Phone Number<br>
    <input id="phone-number" type="text" class="write" autofocus>
  </label>
  <button id="submit" type="submit">Send</button>
  </form>

<!-- <button id="reset" class="reset">Reset Universe?</button> -->
<div id="container">
      <!-- <input id="write" type="text" autofocus> -->
 <!--  <input id="write" rows="1" cols="12"></input> -->
  <ul id="keyboard">
    <li class="number" value="1">1</li>   
    <li class="number" value="2">2</li>
    <li class="number" value="3">3</li>
    <li class="number" value="4">4</li>
    <li class="number" value="5">5</li>
    <li class="number" value="6">6</li>
    <li class="number" value="7">7</li>
    <li class="number" value="8">8</li>
    <li class="number" value="9">9</li>
    <li class="number" value="0">0</li>
    <li class="delete">del</li>
  </ul>
</div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" onload="window.$ = window.jQuery = module.exports;"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js" onload="window.$ = window.jQuery = module.exports;"></script>

  <script src="javascript/keyboard.js"></script>

  <script>

    $('#phone-number').mask('(000) 000-0000');
    var phonenumber = '';

    $('.number').click(function(){
      console.log();
      phonenumber += $(this).attr("value");
      $('#phone-number').val(phonenumber);
      $('#phone-number').trigger('input');
    });

    $('.delete').click(function(){
      console.log();
      phonenumber = phonenumber.substring(0,phonenumber.length-1);
      $('#phone-number').val(phonenumber);
      $('#phone-number').trigger('input');
    });

    $('form').submit(function(event) {
      event.preventDefault();

      // const { value } = document.querySelector('input');
      value = $('input').cleanVal();

      // console.log($('input').cleanVal());
      $('#phone-number').val('');


      // //const { value } = $('input').cleanVal();
      // console.log("value: " + value);

      ipcRenderer.send('phone:add', value)
    });






    // require electron and ipcRenderer
    const electron = require('electron');
    const {ipcRenderer } = electron;
    const list = document.querySelector('ul');
    // listen for todo:add from Electron App
    ipcRenderer.on('todo:add', (event, todo) => {
      const li = document.createElement('li');
      const text = document.createTextNode(todo);
      li.appendChild(text);
      list.appendChild(li);
    });

    // listen for todo:clear from Electron App
    ipcRenderer.on('todo:clear', (event, todo) => {
      clearTodos();
    });


    var files = []
    // listen for showfiles:btn from Electron App
    ipcRenderer.on('showfiles:btn', (event, array) => {
      files = array;

      clearTodos();
      for (var i in array) {
        const li = document.createElement('li');
        const text = document.createTextNode(files[i].filename);
        li.appendChild(text);
        list.appendChild(li);
      }

    });






    // ipcRenderer.on('test:test', (event, todo) => {
    //   // console.log("yolo");
    //   // console.log(todo);
      
    //   // var img = document.createElement("img");
    //   // img.src = "test.jpg";
    //   // document.getElementById("myimg").innerHTML(img);
    //   // document.getElementById("myimg").src="test.jpg";
    // });



    ipcRenderer.on('transfer:btn', (event, todo) => {
      var img = document.createElement("img");
      img.src = "test.jpg";
      document.getElementById("myimg").innerHTML(img);
      document.getElementById("myimg").src="test.jpg";
    });


    // listen for transfer:btn from Electron App
    ipcRenderer.on('transfer:btn', (event, todo) => {

      var img = document.createElement("img");
      img.src = "test.jpg";

      document.getElementById("myimg").innerHTML(img);
      document.getElementById("myimg").src="test.jpg";

    });


    document.getElementById('clear').addEventListener ('click', (event) => {
      clearTodos();
    });


    function clearTodos() {
      list.innerHTML = '';
    }

    function sendSignal(signal) {
      ipcRenderer.send(signal)
    }



  </script>
</body>